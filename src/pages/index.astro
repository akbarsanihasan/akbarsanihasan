---
import { getCollection } from 'astro:content'
import BasicHead from '@components/BasicHead.astro'
import MainLayout from '@layouts/MainLayout.astro'
import ProjectCard from '@components/Projects/ProjectCard.astro'
import ExperienceCard from '@components/ExperienceCard.astro'

const experiences = await getCollection('experiences')
const projects = await getCollection('projects')
---

<!doctype html>
<html lang="en">
    <head>
        <BasicHead
            keywords={['Akbar', 'Sani', 'Hasan']}
            description="A villager equipped with programming skills always trying to prioritize performance, simplicity, freedom & collaboration."
        />
    </head>
    <body>
        <MainLayout>
            <section class="presentable">
                <p class="bio text-lg text-display">
                    A villager equipped with programming skills always trying to
                    prioritize performance, simplicity, <em class="text-bold">
                        freedom
                    </em> & <em class="text-bold">collaboration</em>.
                </p>
            </section>
            <section class="experiences">
                <h4 class="title text-extrabold text-display">Experiences</h4>
                {
                    experiences.map(({ data }) => {
                        const {
                            type,
                            start,
                            end,
                            instance,
                            website,
                            description,
                        } = data
                        return (
                            <ExperienceCard
                                type={type}
                                description={description}
                                start={start}
                                end={end}
                                instance={instance}
                                website={website}
                            />
                        )
                    })
                }
            </section>
            <section class="projects">
                <h4 class="title text-extrabold text-display">Projects</h4>
                {
                    projects.slice(0, 2).map(({ id, data }) => {
                        const { name, description, url, category } = data
                        return (
                            <ProjectCard
                                id={id}
                                name={name}
                                description={description}
                                url={url}
                                category={category}
                            />
                        )
                    })
                }
            </section>
            <div class="quote">
                <div class="quote-block">
                    <h6 class="text-display text-italic text-semibold">
                        i use arch and neovim btw.
                    </h6>
                </div>
            </div>
        </MainLayout>
    </body>
</html>

<style>
    section {
        padding-bottom: 1em;
    }
    section.presentable > p {
        padding-bottom: 0.6em;
        margin-bottom: 0.3em;
        border-bottom: 0.1em solid var(--fg);
    }
    section.projects .title,
    section.experiences .title {
        padding-bottom: 0.6em;
    }
    .quote {
        flex: 1;
        display: flex;
        align-items: end;
        padding: 0;
    }
    .quote .quote-block {
        width: 100%;
        padding-top: 0.3em;
        border-top: 0.1em solid var(--fg);
    }
    @media screen and (min-width: 1024px) {
        section.presentable .bio {
            text-align: justify;
        }
    }
</style>
